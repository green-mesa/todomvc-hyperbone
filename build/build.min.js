function require(e,t,n){var r=require.resolve(e);if(null==r){n=n||e,t=t||"root";var i=new Error('Failed to require "'+n+'" from "'+t+'"');throw i.path=n,i.parent=t,i.require=!0,i}var o=require.modules[r];if(!o._resolving&&!o.exports){var s={};s.exports={},s.client=s.component=!0,o._resolving=!0,o.call(this,s.exports,require.relative(r),s),delete o._resolving,o.exports=s.exports}return o.exports}require.modules={},require.aliases={},require.resolve=function(e){"/"===e.charAt(0)&&(e=e.slice(1));for(var t=[e,e+".js",e+".json",e+"/index.js",e+"/index.json"],n=0;n<t.length;n++){var e=t[n];if(require.modules.hasOwnProperty(e))return e;if(require.aliases.hasOwnProperty(e))return require.aliases[e]}},require.normalize=function(e,t){var n=[];if("."!=t.charAt(0))return t;e=e.split("/"),t=t.split("/");for(var r=0;r<t.length;++r)".."==t[r]?e.pop():"."!=t[r]&&""!=t[r]&&n.push(t[r]);return e.concat(n).join("/")},require.register=function(e,t){require.modules[e]=t},require.alias=function(e,t){if(!require.modules.hasOwnProperty(e))throw new Error('Failed to alias "'+e+'", it does not exist');require.aliases[t]=e},require.relative=function(e){function t(e,t){for(var n=e.length;n--;)if(e[n]===t)return n;return-1}function n(t){var n=require.resolve(t);return require(n,e,t)}var r=require.normalize(e,"..");return n.resolve=function(n){var i=n.charAt(0);if("/"==i)return n.slice(1);if("."==i)return require.normalize(r,n);var o=e.split("/"),s=t(o,"deps")+1;return s||(s=0),n=o.slice(0,s+1).join("/")+"/deps/"+n},n.exists=function(e){return require.modules.hasOwnProperty(n.resolve(e))},n},require.register("underscore",function(e,t,n){(function(){var t=this,r=t._,i={},o=Array.prototype,s=Object.prototype,u=Function.prototype,a=o.push,l=o.slice,c=o.concat,h=s.toString,f=s.hasOwnProperty,p=o.forEach,d=o.map,g=o.reduce,v=o.reduceRight,m=o.filter,y=o.every,b=o.some,x=o.indexOf,w=o.lastIndexOf,_=Array.isArray,A=Object.keys,k=u.bind,j=function(e){return e instanceof j?e:this instanceof j?(this._wrapped=e,void 0):new j(e)};"undefined"!=typeof e?("undefined"!=typeof n&&n.exports&&(e=n.exports=j),e._=j):t._=j,j.VERSION="1.4.4";var E=j.each=j.forEach=function(e,t,n){if(null!=e)if(p&&e.forEach===p)e.forEach(t,n);else if(e.length===+e.length){for(var r=0,o=e.length;o>r;r++)if(t.call(n,e[r],r,e)===i)return}else for(var s in e)if(j.has(e,s)&&t.call(n,e[s],s,e)===i)return};j.map=j.collect=function(e,t,n){var r=[];return null==e?r:d&&e.map===d?e.map(t,n):(E(e,function(e,i,o){r[r.length]=t.call(n,e,i,o)}),r)};var O="Reduce of empty array with no initial value";j.reduce=j.foldl=j.inject=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),g&&e.reduce===g)return r&&(t=j.bind(t,r)),i?e.reduce(t,n):e.reduce(t);if(E(e,function(e,o,s){i?n=t.call(r,n,e,o,s):(n=e,i=!0)}),!i)throw new TypeError(O);return n},j.reduceRight=j.foldr=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),v&&e.reduceRight===v)return r&&(t=j.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var o=e.length;if(o!==+o){var s=j.keys(e);o=s.length}if(E(e,function(u,a,l){a=s?s[--o]:--o,i?n=t.call(r,n,e[a],a,l):(n=e[a],i=!0)}),!i)throw new TypeError(O);return n},j.find=j.detect=function(e,t,n){var r;return q(e,function(e,i,o){return t.call(n,e,i,o)?(r=e,!0):void 0}),r},j.filter=j.select=function(e,t,n){var r=[];return null==e?r:m&&e.filter===m?e.filter(t,n):(E(e,function(e,i,o){t.call(n,e,i,o)&&(r[r.length]=e)}),r)},j.reject=function(e,t,n){return j.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},j.every=j.all=function(e,t,n){t||(t=j.identity);var r=!0;return null==e?r:y&&e.every===y?e.every(t,n):(E(e,function(e,o,s){return(r=r&&t.call(n,e,o,s))?void 0:i}),!!r)};var q=j.some=j.any=function(e,t,n){t||(t=j.identity);var r=!1;return null==e?r:b&&e.some===b?e.some(t,n):(E(e,function(e,o,s){return r||(r=t.call(n,e,o,s))?i:void 0}),!!r)};j.contains=j.include=function(e,t){return null==e?!1:x&&e.indexOf===x?-1!=e.indexOf(t):q(e,function(e){return e===t})},j.invoke=function(e,t){var n=l.call(arguments,2),r=j.isFunction(t);return j.map(e,function(e){return(r?t:e[t]).apply(e,n)})},j.pluck=function(e,t){return j.map(e,function(e){return e[t]})},j.where=function(e,t,n){return j.isEmpty(t)?n?null:[]:j[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},j.findWhere=function(e,t){return j.where(e,t,!0)},j.max=function(e,t,n){if(!t&&j.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&j.isEmpty(e))return-1/0;var r={computed:-1/0,value:-1/0};return E(e,function(e,i,o){var s=t?t.call(n,e,i,o):e;s>=r.computed&&(r={value:e,computed:s})}),r.value},j.min=function(e,t,n){if(!t&&j.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&j.isEmpty(e))return 1/0;var r={computed:1/0,value:1/0};return E(e,function(e,i,o){var s=t?t.call(n,e,i,o):e;s<r.computed&&(r={value:e,computed:s})}),r.value},j.shuffle=function(e){var t,n=0,r=[];return E(e,function(e){t=j.random(n++),r[n-1]=r[t],r[t]=e}),r};var T=function(e){return j.isFunction(e)?e:function(t){return t[e]}};j.sortBy=function(e,t,n){var r=T(t);return j.pluck(j.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return e.index<t.index?-1:1}),"value")};var S=function(e,t,n,r){var i={},o=T(t||j.identity);return E(e,function(t,s){var u=o.call(n,t,s,e);r(i,u,t)}),i};j.groupBy=function(e,t,n){return S(e,t,n,function(e,t,n){(j.has(e,t)?e[t]:e[t]=[]).push(n)})},j.countBy=function(e,t,n){return S(e,t,n,function(e,t){j.has(e,t)||(e[t]=0),e[t]++})},j.sortedIndex=function(e,t,n,r){n=null==n?j.identity:T(n);for(var i=n.call(r,t),o=0,s=e.length;s>o;){var u=o+s>>>1;n.call(r,e[u])<i?o=u+1:s=u}return o},j.toArray=function(e){return e?j.isArray(e)?l.call(e):e.length===+e.length?j.map(e,j.identity):j.values(e):[]},j.size=function(e){return null==e?0:e.length===+e.length?e.length:j.keys(e).length},j.first=j.head=j.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:l.call(e,0,t)},j.initial=function(e,t,n){return l.call(e,0,e.length-(null==t||n?1:t))},j.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:l.call(e,Math.max(e.length-t,0))},j.rest=j.tail=j.drop=function(e,t,n){return l.call(e,null==t||n?1:t)},j.compact=function(e){return j.filter(e,j.identity)};var C=function(e,t,n){return E(e,function(e){j.isArray(e)?t?a.apply(n,e):C(e,t,n):n.push(e)}),n};j.flatten=function(e,t){return C(e,t,[])},j.without=function(e){return j.difference(e,l.call(arguments,1))},j.uniq=j.unique=function(e,t,n,r){j.isFunction(t)&&(r=n,n=t,t=!1);var i=n?j.map(e,n,r):e,o=[],s=[];return E(i,function(n,r){(t?r&&s[s.length-1]===n:j.contains(s,n))||(s.push(n),o.push(e[r]))}),o},j.union=function(){return j.uniq(c.apply(o,arguments))},j.intersection=function(e){var t=l.call(arguments,1);return j.filter(j.uniq(e),function(e){return j.every(t,function(t){return j.indexOf(t,e)>=0})})},j.difference=function(e){var t=c.apply(o,l.call(arguments,1));return j.filter(e,function(e){return!j.contains(t,e)})},j.zip=function(){for(var e=l.call(arguments),t=j.max(j.pluck(e,"length")),n=new Array(t),r=0;t>r;r++)n[r]=j.pluck(e,""+r);return n},j.object=function(e,t){if(null==e)return{};for(var n={},r=0,i=e.length;i>r;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},j.indexOf=function(e,t,n){if(null==e)return-1;var r=0,i=e.length;if(n){if("number"!=typeof n)return r=j.sortedIndex(e,t),e[r]===t?r:-1;r=0>n?Math.max(0,i+n):n}if(x&&e.indexOf===x)return e.indexOf(t,n);for(;i>r;r++)if(e[r]===t)return r;return-1},j.lastIndexOf=function(e,t,n){if(null==e)return-1;var r=null!=n;if(w&&e.lastIndexOf===w)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var i=r?n:e.length;i--;)if(e[i]===t)return i;return-1},j.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=0,o=new Array(r);r>i;)o[i++]=e,e+=n;return o},j.bind=function(e,t){if(e.bind===k&&k)return k.apply(e,l.call(arguments,1));var n=l.call(arguments,2);return function(){return e.apply(t,n.concat(l.call(arguments)))}},j.partial=function(e){var t=l.call(arguments,1);return function(){return e.apply(this,t.concat(l.call(arguments)))}},j.bindAll=function(e){var t=l.call(arguments,1);return 0===t.length&&(t=j.functions(e)),E(t,function(t){e[t]=j.bind(e[t],e)}),e},j.memoize=function(e,t){var n={};return t||(t=j.identity),function(){var r=t.apply(this,arguments);return j.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},j.delay=function(e,t){var n=l.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},j.defer=function(e){return j.delay.apply(j,[e,1].concat(l.call(arguments,1)))},j.throttle=function(e,t){var n,r,i,o,s=0,u=function(){s=new Date,i=null,o=e.apply(n,r)};return function(){var a=new Date,l=t-(a-s);return n=this,r=arguments,0>=l?(clearTimeout(i),i=null,s=a,o=e.apply(n,r)):i||(i=setTimeout(u,l)),o}},j.debounce=function(e,t,n){var r,i;return function(){var o=this,s=arguments,u=function(){r=null,n||(i=e.apply(o,s))},a=n&&!r;return clearTimeout(r),r=setTimeout(u,t),a&&(i=e.apply(o,s)),i}},j.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},j.wrap=function(e,t){return function(){var n=[e];return a.apply(n,arguments),t.apply(this,n)}},j.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},j.after=function(e,t){return 0>=e?t():function(){return--e<1?t.apply(this,arguments):void 0}},j.keys=A||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)j.has(e,n)&&(t[t.length]=n);return t},j.values=function(e){var t=[];for(var n in e)j.has(e,n)&&t.push(e[n]);return t},j.pairs=function(e){var t=[];for(var n in e)j.has(e,n)&&t.push([n,e[n]]);return t},j.invert=function(e){var t={};for(var n in e)j.has(e,n)&&(t[e[n]]=n);return t},j.functions=j.methods=function(e){var t=[];for(var n in e)j.isFunction(e[n])&&t.push(n);return t.sort()},j.extend=function(e){return E(l.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},j.pick=function(e){var t={},n=c.apply(o,l.call(arguments,1));return E(n,function(n){n in e&&(t[n]=e[n])}),t},j.omit=function(e){var t={},n=c.apply(o,l.call(arguments,1));for(var r in e)j.contains(n,r)||(t[r]=e[r]);return t},j.defaults=function(e){return E(l.call(arguments,1),function(t){if(t)for(var n in t)null==e[n]&&(e[n]=t[n])}),e},j.clone=function(e){return j.isObject(e)?j.isArray(e)?e.slice():j.extend({},e):e},j.tap=function(e,t){return t(e),e};var N=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof j&&(e=e._wrapped),t instanceof j&&(t=t._wrapped);var i=h.call(e);if(i!=h.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var o=n.length;o--;)if(n[o]==e)return r[o]==t;n.push(e),r.push(t);var s=0,u=!0;if("[object Array]"==i){if(s=e.length,u=s==t.length)for(;s--&&(u=N(e[s],t[s],n,r)););}else{var a=e.constructor,l=t.constructor;if(a!==l&&!(j.isFunction(a)&&a instanceof a&&j.isFunction(l)&&l instanceof l))return!1;for(var c in e)if(j.has(e,c)&&(s++,!(u=j.has(t,c)&&N(e[c],t[c],n,r))))break;if(u){for(c in t)if(j.has(t,c)&&!s--)break;u=!s}}return n.pop(),r.pop(),u};j.isEqual=function(e,t){return N(e,t,[],[])},j.isEmpty=function(e){if(null==e)return!0;if(j.isArray(e)||j.isString(e))return 0===e.length;for(var t in e)if(j.has(e,t))return!1;return!0},j.isElement=function(e){return!(!e||1!==e.nodeType)},j.isArray=_||function(e){return"[object Array]"==h.call(e)},j.isObject=function(e){return e===Object(e)},E(["Arguments","Function","String","Number","Date","RegExp"],function(e){j["is"+e]=function(t){return h.call(t)=="[object "+e+"]"}}),j.isArguments(arguments)||(j.isArguments=function(e){return!(!e||!j.has(e,"callee"))}),"function"!=typeof/./&&(j.isFunction=function(e){return"function"==typeof e}),j.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},j.isNaN=function(e){return j.isNumber(e)&&e!=+e},j.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==h.call(e)},j.isNull=function(e){return null===e},j.isUndefined=function(e){return void 0===e},j.has=function(e,t){return f.call(e,t)},j.noConflict=function(){return t._=r,this},j.identity=function(e){return e},j.times=function(e,t,n){for(var r=Array(e),i=0;e>i;i++)r[i]=t.call(n,i);return r},j.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var M={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};M.unescape=j.invert(M.escape);var I={escape:new RegExp("["+j.keys(M.escape).join("")+"]","g"),unescape:new RegExp("("+j.keys(M.unescape).join("|")+")","g")};j.each(["escape","unescape"],function(e){j[e]=function(t){return null==t?"":(""+t).replace(I[e],function(t){return M[e][t]})}}),j.result=function(e,t){if(null==e)return null;var n=e[t];return j.isFunction(n)?n.call(e):n},j.mixin=function(e){E(j.functions(e),function(t){var n=j[t]=e[t];j.prototype[t]=function(){var e=[this._wrapped];return a.apply(e,arguments),H.call(this,n.apply(j,e))}})};var L=0;j.uniqueId=function(e){var t=++L+"";return e?e+t:t},j.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var R=/(.)^/,F={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},z=/\\|'|\r|\n|\t|\u2028|\u2029/g;j.template=function(e,t,n){var r;n=j.defaults({},n,j.templateSettings);var i=new RegExp([(n.escape||R).source,(n.interpolate||R).source,(n.evaluate||R).source].join("|")+"|$","g"),o=0,s="__p+='";e.replace(i,function(t,n,r,i,u){return s+=e.slice(o,u).replace(z,function(e){return"\\"+F[e]}),n&&(s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(s+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(s+="';\n"+i+"\n__p+='"),o=u+t.length,t}),s+="';\n",n.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{r=new Function(n.variable||"obj","_",s)}catch(u){throw u.source=s,u}if(t)return r(t,j);var a=function(e){return r.call(this,e,j)};return a.source="function("+(n.variable||"obj")+"){\n"+s+"}",a},j.chain=function(e){return j(e).chain()};var H=function(e){return this._chain?j(e).chain():e};j.mixin(j),E(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=o[e];j.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],H.call(this,n)}}),E(["concat","join","slice"],function(e){var t=o[e];j.prototype[e]=function(){return H.call(this,t.apply(this._wrapped,arguments))}}),j.extend(j.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this)}),require.register("backbone-events",function(e,t,n){var r=[];r.push;var i=r.slice;r.splice;var o=t("underscore"),s=n.exports.Events={on:function(e,t,n){if(!a(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!a(this,"once",e,[t,n])||!t)return this;var r=this,i=o.once(function(){r.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,n)},off:function(e,t,n){var r,i,s,u,l,c,h,f;if(!this._events||!a(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;for(u=e?[e]:o.keys(this._events),l=0,c=u.length;c>l;l++)if(e=u[l],s=this._events[e]){if(this._events[e]=r=[],t||n)for(h=0,f=s.length;f>h;h++)i=s[h],(t&&t!==i.callback&&t!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=i.call(arguments,1);if(!a(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&l(n,t),r&&l(r,arguments),this},stopListening:function(e,t,n){var r=this._listeningTo;if(!r)return this;var i=!t&&!n;n||"object"!=typeof t||(n=this),e&&((r={})[e._listenId]=e);for(var s in r)e=r[s],e.off(t,n,this),(i||o.isEmpty(e._events))&&delete this._listeningTo[s];return this}},u=/\s+/,a=function(e,t,n,r){if(!n)return!0;if("object"==typeof n){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(u.test(n)){for(var o=n.split(u),s=0,a=o.length;a>s;s++)e[t].apply(e,[o[s]].concat(r));return!1}return!0},l=function(e,t){var n,r=-1,i=e.length,o=t[0],s=t[1],u=t[2];switch(t.length){case 0:for(;++r<i;)(n=e[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o,s);return;case 3:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o,s,u);return;default:for(;++r<i;)(n=e[r]).callback.apply(n.ctx,t)}},c={listenTo:"on",listenToOnce:"once"};o.each(c,function(e,t){s[t]=function(t,n,r){var i=this._listeningTo||(this._listeningTo={}),s=t._listenId||(t._listenId=o.uniqueId("l"));return i[s]=t,r||"object"!=typeof n||(r=this),t[e](n,r,this),this}}),s.bind=s.on,s.unbind=s.off}),require.register("hyperbone-view",function(e,t,n){function r(e){a(e.node)?e.node.setAttribute(e.attribute,e.fn(this.model,y)):e.node.replaceWholeText(e.fn(this.model,y))}function i(e,t){var n=t(e);if(n)for(e=e.firstChild;e;)i(e,t),e=e.nextSibling}function o(e){var t=[];return p.each(e,function(e,n){1===n%2&&t.push(e.trim())}),t}function s(e){for(var e,t,n,r=[],i=0;i<e.length;++i)t=e[i],0==i%2?r.push('"'+t.replace(/"/g,'\\"')+'"'):c(t)?r.push(' + model.get("'+t+'") + '):(n=h(t))?r.push(' + helpers["'+n.fn+'"]( model.get("'+n.val+'"), model) + '):(n=f(t))&&r.push(' + helpers["'+n.fn+'"]('+(n.val?n.val:'""')+", model) + ");return r="\n return "+r.join("").replace(/\n/g,"\\n"),new Function("model","helpers",r)}function u(e){return e.split(g.tache)}function a(e){return 1===e.nodeType}function l(e){return 3===e.nodeType}function c(e){return g.alias.test(e)}function h(e){var t=e.match(g.helper);return t?{fn:t[1],val:t[2]}:!1}function f(e){var t=e.match(g.expression);return t?{fn:t[1],val:t[2]}:!1}var p=t("underscore"),d=t("dom"),g={alias:/^[A-Za-z0-9\_\.]+$/,helper:/^([A-Za-z\_\.]+)\(([A-Za-z0-9\_\.]+)\)$/,expression:/^([A-Za-z\_\.]+)\((|(.+))\)$/,tache:/\{\{|\}\}/},v=t("backbone-events").Events,m={},y={},b=function(e){return this.activeNodes=[],this.delegates=[],p.extend(this,v),e&&(e.initialised&&this.on("initialised",e.initialised),e.delegates&&this.addDelegate(e.delegates),e.model&&e.el&&this.create(e.el,e.model)),this};b.prototype={create:function(e,t){return this.el=d(e),this._original=this.el.clone(),this.model=t,this.evaluate(),this.bindToModel(),this.activateDelegates(),this.trigger("initialised",this.el,this.model),this},addDelegate:function(e,t){return p.isObject(e)?(p.each(e,function(e,t){this.addDelegate(t,e)},this),this):(this.delegates.push({selector:e,fn:t}),this)},evaluate:function(){var e=this;return i(this.el.els[0],function(t){var n,r=!0;return a(t)?(p.each(t.attributes,function(n){m[n.name]&&m[n.name].call(e,t,t.getAttribute(n.name),function(){r=!1});var i=u(n.nodeValue);i.length>1&&e.activeNodes.push({node:t,attribute:n.name,original:n.nodeValue,expressions:o(i),tokens:i})}),r):l(t)?(n=u(t.wholeText),n.length>1&&e.activeNodes.push({node:t,expressions:o(n),original:t.wholeText,tokens:n}),!0):!0}),this},bindToModel:function(){var e=this;return p.each(this.activeNodes,function(t){t.fn=s(t.tokens),p.each(t.expressions,function(n){var n,i="change";c(n)?i="change:"+n:(n=h(n))&&(i="change:"+n.val),this.model.on(i,function(){r.call(e,t),e.trigger("updated",e.el,e.model,i)})},this),r.call(e,t)},this),this},activateDelegates:function(){var e=this;return p.each(this.delegates,function(t){var n=t.selector.split(" "),r=n[0],i=n[1];this.el.on(r,i,function(n){t.fn.call(e.model,n,e.model,e.el),e.trigger("delegate-fired",e.el,e.model,t.selector)})},this),this}},n.exports.HyperboneView=b,p.extend(y,{get:function(e){return e},url:function(e,t){return t.url()},rel:function(e,t){return t.rel(e)},expression:function(e){return e}}),n.exports.registerHelper=function(e,t){p.isObject(e)?p.extend(y,e):y[e]=t},p.extend(m,{rel:function(e){"A"===e.tagName&&(rel=e.getAttribute("rel"),rel&&1===u(rel).length&&e.setAttribute("href",this.model.rel(rel)))},"if":function(e,t){var n=this,r=function(){d(e).css({display:0!==n.model.get(t)?"":"none"})};this.model.on("change:"+t,function(){r()}),r()},"hb-with":function(e,t,n){var r,i,o=this;if(e.removeAttribute("hb-with"),r=this.model.get(t),r.models){i=document.createDocumentFragment(),p.each(e.children,function(e){i.appendChild(e)}),r.__hyperbone_view=e,r.__hyperbone_subview=i;var s=function(n){n.each(function(n){var r=i.cloneNode(!0);(new b).on("updated",function(e,n,r){o.trigger("updated",e,n,"subview "+t+" "+r)}).create(d(r),n),e.appendChild(r)})};r.on("add remove",function(){e.innerHTML="",s(o.model.get(t))}),s(r)}else(new b).on("updated",function(e,n,r){o.trigger("updated",e,n,"subview "+t+" "+r)}).create(d(e),o.model.get(t));n()},"hb-bind":function(e,t,n){var r=this,i=d(e),o=this.model.get(t);i.on("change",function(){var e=r.model.get(t),n=i.val();e!==n&&r.model.set(t,n)}),this.model.on("change:"+t,function(e,t){var n=i.val();n!==t&&i.val(t)}),i.val(o),n()},"hb-click-bind":function(e,t){var n=this;n.model.set(t,!1),d(e).on("click",function(){n.model.set(t,!0)})},"hb-trigger":function(e,t){var n=this;n.model.set(t,!1),d(e).on("click",function(r){n.model.trigger(t,n.model,e,r)})}}),n.exports.registerAttributeHandler=function(e,t){p.isObject(e)?p.extend(m,e):m[e]=t}}),require.register("backbone-helpers",function(e,t,n){var r=t("underscore");n.exports.extend=function(e,t){var n,i=this;n=e&&r.has(e,"constructor")?e.constructor:function(){return i.apply(this,arguments)},r.extend(n,i,t);var o=function(){this.constructor=n};return o.prototype=i.prototype,n.prototype=new o,e&&r.extend(n.prototype,e),n.__super__=i.prototype,n},n.exports.urlError=function(){throw new Error('A "url" property or function must be specified')},n.exports.wrapError=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}}}),require.register("backbone-model",function(e,t,n){var r=t("underscore"),i=t("backbone-events").Events,o=t("backbone-helpers").urlError,s=t("backbone-helpers").wrapError,u=[];u.push;var a=u.slice;u.splice;var l=n.exports.Model=function(e,t){var n=e||{};t||(t={}),this.cid=r.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(n=this.parse(n,t)||{}),n=r.defaults({},n,r.result(this,"defaults")),this.set(n,t),this.changed={},this.initialize.apply(this,arguments)};r.extend(l.prototype,i,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return r.clone(this.attributes)},sync:function(){throw new Error("Sync component not used")},get:function(e){return this.attributes[e]},escape:function(e){return r.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,n){var i,o,s,u,a,l,c,h;if(null==e)return this;if("object"==typeof e?(o=e,n=t):(o={})[e]=t,n||(n={}),!this._validate(o,n))return!1;s=n.unset,a=n.silent,u=[],l=this._changing,this._changing=!0,l||(this._previousAttributes=r.clone(this.attributes),this.changed={}),h=this.attributes,c=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]);for(i in o)t=o[i],r.isEqual(h[i],t)||u.push(i),r.isEqual(c[i],t)?delete this.changed[i]:this.changed[i]=t,s?delete h[i]:h[i]=t;if(!a){u.length&&(this._pending=!0);for(var f=0,p=u.length;p>f;f++)this.trigger("change:"+u[f],this,h[u[f]],n)}if(l)return this;if(!a)for(;this._pending;)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,r.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,r.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!r.isEmpty(this.changed):r.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?r.clone(this.changed):!1;var t,n=!1,i=this._changing?this._previousAttributes:this.attributes;for(var o in e)r.isEqual(i[o],t=e[o])||((n||(n={}))[o]=t);return n},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return r.clone(this._previousAttributes)},fetch:function(e){e=e?r.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,n=e.success;return e.success=function(r){return t.set(t.parse(r,e),e)?(n&&n(t,r,e),t.trigger("sync",t,r,e),void 0):!1},s(this,e),this.sync("read",this,e)},save:function(e,t,n){var i,o,u,a=this.attributes;if(null==e||"object"==typeof e?(i=e,n=t):(i={})[e]=t,n=r.extend({validate:!0},n),i&&!n.wait){if(!this.set(i,n))return!1}else if(!this._validate(i,n))return!1;i&&n.wait&&(this.attributes=r.extend({},a,i)),void 0===n.parse&&(n.parse=!0);var l=this,c=n.success;return n.success=function(e){l.attributes=a;var t=l.parse(e,n);return n.wait&&(t=r.extend(i||{},t)),r.isObject(t)&&!l.set(t,n)?!1:(c&&c(l,e,n),l.trigger("sync",l,e,n),void 0)},s(this,n),o=this.isNew()?"create":n.patch?"patch":"update","patch"===o&&(n.attrs=i),u=this.sync(o,this,n),i&&n.wait&&(this.attributes=a),u},destroy:function(e){e=e?r.clone(e):{};var t=this,n=e.success,i=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(r){(e.wait||t.isNew())&&i(),n&&n(t,r,e),t.isNew()||t.trigger("sync",t,r,e)},this.isNew())return e.success(),!1;s(this,e);var o=this.sync("delete",this,e);return e.wait||i(),o},url:function(){var e=r.result(this,"urlRoot")||r.result(this.collection,"url")||o();return this.isNew()?e:e+("/"===e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(e){return this._validate({},r.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=r.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,r.extend(t,{validationError:n})),!1):!0}});var c=["keys","values","pairs","invert","pick","omit"];r.each(c,function(e){l.prototype[e]=function(){var t=a.call(arguments);return t.unshift(this.attributes),r[e].apply(r,t)}}),l.extend=t("backbone-helpers").extend}),require.register("backbone-collection",function(e,t,n){var r=t("underscore"),i=t("backbone-model").Model,o=t("backbone-events").Events,s=[];s.push;var u=s.slice;s.splice;var a=t("backbone-helpers").wrapError,l=n.exports.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,r.extend({silent:!0},t))},c={add:!0,remove:!0,merge:!0},h={add:!0,remove:!1};r.extend(l.prototype,o,{model:i,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return Backbone.sync.apply(this,arguments)},add:function(e,t){return this.set(e,r.extend({merge:!1},t,h))},remove:function(e,t){var n=!r.isArray(e);e=n?[e]:r.clone(e),t||(t={});var i,o,s,u;for(i=0,o=e.length;o>i;i++)u=e[i]=this.get(e[i]),u&&(delete this._byId[u.id],delete this._byId[u.cid],s=this.indexOf(u),this.models.splice(s,1),this.length--,t.silent||(t.index=s,u.trigger("remove",u,this,t)),this._removeReference(u));return n?e[0]:e},set:function(e,t){t=r.defaults({},t,c),t.parse&&(e=this.parse(e,t));var n=!r.isArray(e);e=n?e?[e]:[]:r.clone(e);var o,s,u,a,l,h,f,p=t.at,d=this.model,g=this.comparator&&null==p&&t.sort!==!1,v=r.isString(this.comparator)?this.comparator:null,m=[],y=[],b={},x=t.add,w=t.merge,_=t.remove,A=!g&&x&&_?[]:!1;for(o=0,s=e.length;s>o;o++){if(l=e[o],u=l instanceof i?a=l:l[d.prototype.idAttribute],h=this.get(u))_&&(b[h.cid]=!0),w&&(l=l===a?a.attributes:l,t.parse&&(l=h.parse(l,t)),h.set(l,t),g&&!f&&h.hasChanged(v)&&(f=!0)),e[o]=h;else if(x){if(a=e[o]=this._prepareModel(l,t),!a)continue;m.push(a),a.on("all",this._onModelEvent,this),this._byId[a.cid]=a,null!=a.id&&(this._byId[a.id]=a)}A&&A.push(h||a)}if(_){for(o=0,s=this.length;s>o;++o)b[(a=this.models[o]).cid]||y.push(a);y.length&&this.remove(y,t)}if(m.length||A&&A.length)if(g&&(f=!0),this.length+=m.length,null!=p)for(o=0,s=m.length;s>o;o++)this.models.splice(p+o,0,m[o]);else{A&&(this.models.length=0);var k=A||m;for(o=0,s=k.length;s>o;o++)this.models.push(k[o])}if(f&&this.sort({silent:!0}),!t.silent){for(o=0,s=m.length;s>o;o++)(a=m[o]).trigger("add",a,this,t);(f||A&&A.length)&&this.trigger("sort",this,t)}return n?e[0]:e},reset:function(e,t){t||(t={});for(var n=0,i=this.models.length;i>n;n++)this._removeReference(this.models[n]);return t.previousModels=this.models,this._reset(),e=this.add(e,r.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,r.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,r.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return u.apply(this.models,arguments)},get:function(e){return null==e?void 0:this._byId[e.id]||this._byId[e.cid]||this._byId[e]},at:function(e){return this.models[e]},where:function(e,t){return r.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),r.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(r.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return r.invoke(this.models,"get",e)},fetch:function(e){e=e?r.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success,n=this;return e.success=function(r){var i=e.reset?"reset":"set";n[i](r,e),t&&t(n,r,e),n.trigger("sync",n,r,e)},a(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?r.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,i=t.success;return t.success=function(e,t,r){r.wait&&n.add(e,r),i&&i(e,t,r)},e.save(null,t),e},parse:function(e){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof i)return e.collection||(e.collection=this),e;t=t?r.clone(t):{},t.collection=this;var n=new this.model(e,t);return n.validationError?(this.trigger("invalid",this,n.validationError,t),!1):n},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){("add"!==e&&"remove"!==e||n===this)&&("destroy"===e&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});var f=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain"];r.each(f,function(e){l.prototype[e]=function(){var t=u.call(arguments);return t.unshift(this.models),r[e].apply(r,t)}});var p=["groupBy","countBy","sortBy"];r.each(p,function(e){l.prototype[e]=function(t,n){var i=r.isFunction(t)?t:function(e){return e.get(t)};return r[e](this.models,i,n)}}),l.extend=t("backbone-helpers").extend}),require.register("uritemplate",function(e,t,n){!function(e){"use strict";
function t(e){var n;if(null===e||void 0===e)return!1;if(r.isArray(e))return e.length>0;if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)return!0;for(n in e)if(e.hasOwnProperty(n)&&t(e[n]))return!0;return!1}var n=function(){function e(e){this.options=e}return e.prototype.toString=function(){return JSON&&JSON.stringify?JSON.stringify(this.options):this.options},e}(),r=function(){function e(e){return"[object Array]"===Object.prototype.toString.apply(e)}function t(e){return"[object String]"===Object.prototype.toString.apply(e)}function n(e){return"[object Number]"===Object.prototype.toString.apply(e)}function r(e){return"[object Boolean]"===Object.prototype.toString.apply(e)}function i(e,t){var n,r="",i=!0;for(n=0;n<e.length;n+=1)i?i=!1:r+=t,r+=e[n];return r}function o(e,t){for(var n=[],r=0;r<e.length;r+=1)n.push(t(e[r]));return n}function s(e,t){for(var n=[],r=0;r<e.length;r+=1)t(e[r])&&n.push(e[r]);return n}function u(e){if("object"!=typeof e||null===e)return e;Object.freeze(e);var t,n;for(n in e)e.hasOwnProperty(n)&&(t=e[n],"object"==typeof t&&a(t));return e}function a(e){return"function"==typeof Object.freeze?u(e):e}return{isArray:e,isString:t,isNumber:n,isBoolean:r,join:i,map:o,filter:s,deepFreeze:a}}(),i=function(){function e(e){return e>="a"&&"z">=e||e>="A"&&"Z">=e}function t(e){return e>="0"&&"9">=e}function n(e){return t(e)||e>="a"&&"f">=e||e>="A"&&"F">=e}return{isAlpha:e,isDigit:t,isHexDigit:n}}(),o=function(){function e(e){var t,n,r="",i=s.encode(e);for(n=0;n<i.length;n+=1)t=i.charCodeAt(n),r+="%"+(16>t?"0":"")+t.toString(16).toUpperCase();return r}function t(e,t){return"%"===e.charAt(t)&&i.isHexDigit(e.charAt(t+1))&&i.isHexDigit(e.charAt(t+2))}function n(e,t){return parseInt(e.substr(t,2),16)}function r(e){if(!t(e,0))return!1;var r=n(e,1),i=s.numBytes(r);if(0===i)return!1;for(var o=1;i>o;o+=1)if(!t(e,3*o)||!s.isValidFollowingCharCode(n(e,3*o+1)))return!1;return!0}function o(e,r){var i=e.charAt(r);if(!t(e,r))return i;var o=n(e,r+1),u=s.numBytes(o);if(0===u)return i;for(var a=1;u>a;a+=1)if(!t(e,r+3*a)||!s.isValidFollowingCharCode(n(e,r+3*a+1)))return i;return e.substr(r,3*u)}var s={encode:function(e){return unescape(encodeURIComponent(e))},numBytes:function(e){return 127>=e?1:e>=194&&223>=e?2:e>=224&&239>=e?3:e>=240&&244>=e?4:0},isValidFollowingCharCode:function(e){return e>=128&&191>=e}};return{encodeCharacter:e,isPctEncoded:r,pctCharAt:o}}(),s=function(){function e(e){return i.isAlpha(e)||i.isDigit(e)||"_"===e||o.isPctEncoded(e)}function t(e){return i.isAlpha(e)||i.isDigit(e)||"-"===e||"."===e||"_"===e||"~"===e}function n(e){return":"===e||"/"===e||"?"===e||"#"===e||"["===e||"]"===e||"@"===e||"!"===e||"$"===e||"&"===e||"("===e||")"===e||"*"===e||"+"===e||","===e||";"===e||"="===e||"'"===e}return{isVarchar:e,isUnreserved:t,isReserved:n}}(),u=function(){function e(e,t){var n,r="",i="";for(("number"==typeof e||"boolean"==typeof e)&&(e=e.toString()),n=0;n<e.length;n+=i.length)i=e.charAt(n),r+=s.isUnreserved(i)||t&&s.isReserved(i)?i:o.encodeCharacter(i);return r}function t(t){return e(t,!0)}function n(e,t){var n=o.pctCharAt(e,t);return n.length>1?n:s.isReserved(n)||s.isUnreserved(n)?n:o.encodeCharacter(n)}function r(e){var t,n="",r="";for(t=0;t<e.length;t+=r.length)r=o.pctCharAt(e,t),n+=r.length>1?r:s.isReserved(r)||s.isUnreserved(r)?r:o.encodeCharacter(r);return n}return{encode:e,encodePassReserved:t,encodeLiteral:r,encodeLiteralCharacter:n}}(),a=function(){function e(e){t[e]={symbol:e,separator:"?"===e?"&":""===e||"+"===e||"#"===e?",":e,named:";"===e||"&"===e||"?"===e,ifEmpty:"&"===e||"?"===e?"=":"",first:"+"===e?"":e,encode:"+"===e||"#"===e?u.encodePassReserved:u.encode,toString:function(){return this.symbol}}}var t={};return e(""),e("+"),e("#"),e("."),e("/"),e(";"),e("?"),e("&"),{valueOf:function(e){return t[e]?t[e]:"=,!@|".indexOf(e)>=0?null:t[""]}}}(),l=function(){function e(e){this.literal=u.encodeLiteral(e)}return e.prototype.expand=function(){return this.literal},e.prototype.toString=e.prototype.expand,e}(),c=function(){function e(e){function t(){var t=e.substring(p,l);if(0===t.length)throw new n({expressionText:e,message:"a varname must be specified",position:l});f={varname:t,exploded:!1,maxLength:null},p=null}function r(){if(d===l)throw new n({expressionText:e,message:"after a ':' you have to specify the length",position:l});f.maxLength=parseInt(e.substring(d,l),10),d=null}var u,l,c=[],f=null,p=null,d=null,g="";for(u=function(t){var r=a.valueOf(t);if(null===r)throw new n({expressionText:e,message:"illegal use of reserved operator",position:l,operator:t});return r}(e.charAt(0)),l=u.symbol.length,p=l;l<e.length;l+=g.length){if(g=o.pctCharAt(e,l),null!==p){if("."===g){if(p===l)throw new n({expressionText:e,message:"a varname MUST NOT start with a dot",position:l});continue}if(s.isVarchar(g))continue;t()}if(null!==d){if(l===d&&"0"===g)throw new n({expressionText:e,message:"A :prefix must not start with digit 0",position:l});if(i.isDigit(g)){if(l-d>=4)throw new n({expressionText:e,message:"A :prefix must have max 4 digits",position:l});continue}r()}if(":"!==g)if("*"!==g){if(","!==g)throw new n({expressionText:e,message:"illegal character",character:g,position:l});c.push(f),f=null,p=l+1}else{if(null===f)throw new n({expressionText:e,message:"exploded without varspec",position:l});if(f.exploded)throw new n({expressionText:e,message:"exploded twice",position:l});if(f.maxLength)throw new n({expressionText:e,message:"an explode (*) MUST NOT follow to a prefix",position:l});f.exploded=!0}else{if(null!==f.maxLength)throw new n({expressionText:e,message:"only one :maxLength is allowed per varspec",position:l});if(f.exploded)throw new n({expressionText:e,message:"an exploeded varspec MUST NOT be varspeced",position:l});d=l+1}}return null!==p&&t(),null!==d&&r(),c.push(f),new h(e,u,c)}function t(t){var r,i,o=[],s=null,u=0;for(r=0;r<t.length;r+=1)if(i=t.charAt(r),null===u){if(null===s)throw new Error("reached unreachable code");if("{"===i)throw new n({templateText:t,message:"brace already opened",position:r});if("}"===i){if(s+1===r)throw new n({templateText:t,message:"empty braces",position:s});try{o.push(e(t.substring(s+1,r)))}catch(a){if(a.prototype===n.prototype)throw new n({templateText:t,message:a.options.message,position:s+a.options.position,details:a.options});throw a}s=null,u=r+1}}else{if("}"===i)throw new n({templateText:t,message:"unopened brace closed",position:r});"{"===i&&(r>u&&o.push(new l(t.substring(u,r))),u=null,s=r)}if(null!==s)throw new n({templateText:t,message:"unclosed brace",position:s});return u<t.length&&o.push(new l(t.substr(u))),new f(t,o)}return t}(),h=function(){function e(e){return JSON&&JSON.stringify?JSON.stringify(e):e}function n(e){if(!t(e))return!0;if(r.isString(e))return""===e;if(r.isNumber(e)||r.isBoolean(e))return!1;if(r.isArray(e))return 0===e.length;for(var n in e)if(e.hasOwnProperty(n))return!1;return!0}function i(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&n.push({name:t,value:e[t]});return n}function o(e,t,n){this.templateText=e,this.operator=t,this.varspecs=n}function s(e,t,n){var r="";if(n=n.toString(),t.named){if(r+=u.encodeLiteral(e.varname),""===n)return r+=t.ifEmpty;r+="="}return null!==e.maxLength&&(n=n.substr(0,e.maxLength)),r+=t.encode(n)}function a(e){return t(e.value)}function l(e,o,s){var l=[],c="";if(o.named){if(c+=u.encodeLiteral(e.varname),n(s))return c+=o.ifEmpty;c+="="}return r.isArray(s)?(l=s,l=r.filter(l,t),l=r.map(l,o.encode),c+=r.join(l,",")):(l=i(s),l=r.filter(l,a),l=r.map(l,function(e){return o.encode(e.name)+","+o.encode(e.value)}),c+=r.join(l,",")),c}function c(e,o,s){var l=r.isArray(s),c=[];return l?(c=s,c=r.filter(c,t),c=r.map(c,function(t){var r=u.encodeLiteral(e.varname);return r+=n(t)?o.ifEmpty:"="+o.encode(t)})):(c=i(s),c=r.filter(c,a),c=r.map(c,function(e){var t=u.encodeLiteral(e.name);return t+=n(e.value)?o.ifEmpty:"="+o.encode(e.value)})),r.join(c,o.separator)}function h(e,n){var o=[],s="";return r.isArray(n)?(o=n,o=r.filter(o,t),o=r.map(o,e.encode),s+=r.join(o,e.separator)):(o=i(n),o=r.filter(o,function(e){return t(e.value)}),o=r.map(o,function(t){return e.encode(t.name)+"="+e.encode(t.value)}),s+=r.join(o,e.separator)),s}return o.prototype.toString=function(){return this.templateText},o.prototype.expand=function(i){var o,u,a,f,p=[],d=!1,g=this.operator;for(o=0;o<this.varspecs.length;o+=1)if(u=this.varspecs[o],a=i[u.varname],null!==a&&void 0!==a)if(u.exploded&&(d=!0),f=r.isArray(a),"string"==typeof a||"number"==typeof a||"boolean"==typeof a)p.push(s(u,g,a));else{if(u.maxLength&&t(a))throw new Error("Prefix modifiers are not applicable to variables that have composite values. You tried to expand "+this+" with "+e(a));u.exploded?t(a)&&(g.named?p.push(c(u,g,a)):p.push(h(g,a))):(g.named||!n(a))&&p.push(l(u,g,a))}return 0===p.length?"":g.first+r.join(p,g.separator)},o}(),f=function(){function e(e,t){this.templateText=e,this.expressions=t,r.deepFreeze(this)}return e.prototype.toString=function(){return this.templateText},e.prototype.expand=function(e){var t,n="";for(t=0;t<this.expressions.length;t+=1)n+=this.expressions[t].expand(e);return n},e.parse=c,e.UriTemplateError=n,e}();e(f)}(function(e){"use strict";"undefined"!=typeof n?n.exports=e:"function"==typeof define?define([],function(){return e}):"undefined"!=typeof window?window.UriTemplate=e:global.UriTemplate=e})}),require.register("hyperbone-model",function(e,t,n){var r=t("underscore"),i=t("backbone-model").Model,o=t("backbone-collection").Collection.extend({isHyperbone:!0,toJSON:function(){var e=[];return r.each(this.models,function(t){t.isHyperbone?e.push(t.toJSON()):e.push(t)}),e}}),s=t("uritemplate").parse,u=function(e,t){e||(e={}),this.attributes={},this.cid=r.uniqueId("c"),this.isHyperbone=!0,this._prototypes||(this._prototypes={}),t||(t={}),e._prototypes&&(r.extend(this._prototypes,e._prototypes),delete e._prototypes),t&&t.collection&&(this.collection=t.collection),e=t&&t.parse?this.parse(this.parseHypermedia(e)):this.parseHypermedia(e),e=r.defaults({},e,r.result(this,"defaults")),this.set(e,{silent:!0}),this.changed={},this.initialize.apply(this,arguments)};r.extend(u.prototype,i.prototype,{parseHypermedia:function(e){var t=this;this._links=e._links||{},delete e._links,this._curies={};var n=this._links?this._links.curie?[this._links.curie]:this._links.curies?this._links.curies:null:null;if(n&&r.each(n,function(e){if(!e.templated)throw new Error("A curie without a template? What are you thinking?");this._curies[e.name]=s(e.href)},this),r.each(this._links,function(e,t){r.isArray(e)&&1===e.length&&(this._links[t]=e[0]),e.templated&&(e.template=s(e.href))},this),e._embedded&&(r.each(e._embedded,function(t,n){e[n]=t}),delete e._embedded),e._controls){this._controls={};var i;i=function(e){var n={};return r.each(e,function(e,r){e.method?(n[r]=new u(e),e.action||n[r].set("action",t.url(),{silent:!0})):n[r]=i(e)}),n},this._controls=new u(i(e._controls)),delete e._controls}return e},toJSON:function(){var e={};return r.each(this.attributes,function(t,n){e[n]=t.isHyperbone?t.toJSON():t},this),e},url:function(){if(this._links.self&&this._links.self.href)return this._links.self.href;throw new Error("Not a hypermedia resource")},get:function(e){if(this.attributes[e]||0===this.attributes[e])return this.attributes[e];if(-1!==r.indexOf(e,".")||/([a-zA-Z_]+)\[([0-9]+)\]/.test(e)){var t=e.split(".");e=t.shift();var n=t.join(".");if(this.attributes[e])return this.attributes[e].get(n);t=e.match(/([a-zA-Z_]+)\[([0-9]+)\]/);var i=parseInt(t[2],10);if(e=t[1],r.isNumber(i)&&this.attributes[e])return n?this.attributes[e].at(i).get(n):this.attributes[e].at(i)}return null},set:function(e,t,n){var i,s,a,l,c,h,f,p,d,g,v=this;if(null==e)return this;if("object"==typeof e?(s=e,n=t):(s={})[e]=t,n||(n={}),!this._validate(s,n))return!1;a=n.unset,c=n.silent,l=[],h=this._changing,noTraverse=n.noTraverse||!1,ignoreDotNotation=n.ignoreDotNotation||!1,this._changing=!0,h||(this._previousAttributes=r.clone(this.attributes),this.changed={}),p=this.attributes,f=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]),r.each(s,function(e,t){r.isObject(e)&&p[t]&&p[t].isHyperbone&&(r.isArray(e)?(r.each(e,function(e,n){p[t].at(n).set(e)}),delete s[t]):(p[t].set(e),delete s[t]))});for(i in s){if(-1===r.indexOf(i,".")||ignoreDotNotation){if(t=s[i],r.isObject(t)&&!r.isArray(t))t.isHyperbone||noTraverse||(d=this._prototypes[i]?this._prototypes[i]:u,t=new d(t),t._parent=v),t.on&&(t._trigger=t.trigger,t.trigger=function(e){return function(){var t=Array.prototype.slice.call(arguments,0);this._trigger.apply(this,t),t[0]=t[0]+":"+e,v.trigger.apply(v,t)}}(i));else if(r.isArray(t)){var m=!0;if(r.each(t,function(e){r.isObject(e)||(m=!1)}),m){var y=[];d=this._prototypes[i]?this._prototypes[i]:u;var b=o.extend({model:d}),x=new b;x._parent=v,r.each(t,function(e){y.push(e)},this),x.add(y),x._trigger=x.trigger,x.trigger=function(e){return function(){var t=Array.prototype.slice.call(arguments,0);this._trigger.apply(this,t),t[0]=t[0]+":"+e,v.trigger.apply(v,t)}}(i),t=x}}}else{g=i.split("."),i=g.pop();var w=g.join(".");this.get(w).set(i,t)}r.isEqual(p[i],t)||l.push(i),r.isEqual(f[i],t)?delete this.changed[i]:this.changed[i]=t,a?delete p[i]:p[i]=t}if(!c){l.length&&(this._pending=!0);for(var _=0,A=l.length;A>_;_++)this.trigger("change:"+l[_],this,p[l[_]],n)}if(h)return this;if(!c)for(;this._pending;)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},rel:function(e,t){var n=this._links[e]||{};if(!n)throw new Error("No such rel found");if(n.templated){if(t)return n.template.expand(t);throw new Error("No data provided to expand templated uri")}return this._links[e].href?this._links[e].href:this._links[e]},rels:function(){return this._links},fullyQualifiedRel:function(e){var t=e.split(":");return this._curies[t[0]].expand({rel:t[1]})},control:function(e){var t;if(this._links[e]){var n=this._links[e].href.split(/\//g);("#controls"===n[0]||"#_controls"===n[0]||"#control"===n[0])&&(n=n.slice(1)),t=this._controls.get(n.join("."))}else t=this._controls.get(e);return t?t:null}}),u.extend=i.extend,n.exports.Model=u,n.exports.Collection=o}),require.register("type",function(e,t,n){var r=Object.prototype.toString;n.exports=function(e){switch(r.call(e)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object String]":return"string"}return null===e?"null":void 0===e?"undefined":e&&1===e.nodeType?"element":e===Object(e)?"object":typeof e}}),require.register("event",function(e){e.bind=function(e,t,n,r){return e.addEventListener?e.addEventListener(t,n,r):e.attachEvent("on"+t,n),n},e.unbind=function(e,t,n,r){return e.removeEventListener?e.removeEventListener(t,n,r):e.detachEvent("on"+t,n),n}}),require.register("delegate",function(e,t){var n=t("matches-selector"),r=t("event");e.bind=function(e,t,i,o,s){return r.bind(e,i,function(e){n(e.target,t)&&o(e)},s)},e.unbind=function(e,t,n,i){r.unbind(e,t,n,i)}}),require.register("indexof",function(e,t,n){n.exports=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}}),require.register("domify",function(e,t,n){function r(e){if("string"!=typeof e)throw new TypeError("String expected");var t=/<([\w:]+)/.exec(e);if(!t)throw new Error("No elements were generated.");var n=t[1];if("body"==n){var r=document.createElement("html");return r.innerHTML=e,r.removeChild(r.lastChild)}var o=i[n]||i._default,s=o[0],u=o[1],a=o[2],r=document.createElement("div");for(r.innerHTML=u+e+a;s--;)r=r.lastChild;var l=r.children;if(1==l.length)return r.removeChild(l[0]);for(var c=document.createDocumentFragment();l.length;)c.appendChild(r.removeChild(l[0]));return c}n.exports=r;var i={option:[1,'<select multiple="multiple">',"</select>"],optgroup:[1,'<select multiple="multiple">',"</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tbody:[1,"<table>","</table>"],tfoot:[1,"<table>","</table>"],colgroup:[1,"<table>","</table>"],caption:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],th:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:[0,"",""]}}),require.register("classes",function(e,t,n){function r(e){this.el=e,this.list=e.classList}var i=t("indexof"),o=/\s+/,s=Object.prototype.toString;n.exports=function(e){return new r(e)},r.prototype.add=function(e){if(this.list)return this.list.add(e),this;var t=this.array(),n=i(t,e);return~n||t.push(e),this.el.className=t.join(" "),this},r.prototype.remove=function(e){if("[object RegExp]"==s.call(e))return this.removeMatching(e);if(this.list)return this.list.remove(e),this;var t=this.array(),n=i(t,e);return~n&&t.splice(n,1),this.el.className=t.join(" "),this},r.prototype.removeMatching=function(e){for(var t=this.array(),n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},r.prototype.toggle=function(e){return this.list?(this.list.toggle(e),this):(this.has(e)?this.remove(e):this.add(e),this)},r.prototype.array=function(){var e=this.el.className.replace(/^\s+|\s+$/g,""),t=e.split(o);return""===t[0]&&t.shift(),t},r.prototype.has=r.prototype.contains=function(e){return this.list?this.list.contains(e):!!~i(this.array(),e)}}),require.register("css",function(e,t,n){var r={columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0};n.exports=function(e,t){for(var n in t){var i=t[n];"number"!=typeof i||r[n]||(i+="px"),e.style[n]=i}return e}}),require.register("sort",function(e,t,n){function r(e,t){for(var n=[].slice.call(e.children).sort(t),r=document.createDocumentFragment(),i=0;i<n.length;i++)r.appendChild(n[i]);e.appendChild(r)}e=n.exports=r,e.desc=function(e,t){r(e,function(e,n){return~t(e,n)+1})},e.asc=r}),require.register("value",function(e,t,n){function r(e){switch(o(e)){case"checkbox":case"radio":if(e.checked){var t=e.getAttribute("value");return null==t?!0:t}return!1;case"radiogroup":for(var n,r=0;n=e[r];r++)if(n.checked)return n.value;break;case"select":for(var i,s=[],r=0;i=e.options[r];r++)i.selected&&s.push(i.value);return 1===s.length?s[0]:s;default:return e.value}}function i(e,t){switch(o(e)){case"checkbox":case"radio":e.checked=t?!0:!1;break;case"radiogroup":for(var n,r=0;n=e[r];r++)n.checked=n.value===t;break;case"select":for(var i,u,a="array"==s(t)?t:[t],r=0;u=e.options[r];r++){i=0;for(var l,c=0;l=a[c];c++)i|=l===u.value;u.selected=1===i}break;default:e.value=t}}function o(e){var t="array"==s(e)||"object"==s(e);t&&(e=e[0]);var n=e.nodeName.toLowerCase(),r=e.getAttribute("type");return t&&r&&"radio"==r.toLowerCase()?"radiogroup":"input"==n&&r&&"checkbox"==r.toLowerCase()?"checkbox":"input"==n&&r&&"radio"==r.toLowerCase()?"radio":"select"==n?"select":n}var s=t("type");n.exports=function(e,t){return 2==arguments.length?i(e,t):r(e)}}),require.register("query",function(e,t,n){function r(e,t){return t.querySelector(e)}e=n.exports=function(e,t){return t=t||document,r(e,t)},e.all=function(e,t){return t=t||document,t.querySelectorAll(e)},e.engine=function(t){if(!t.one)throw new Error(".one callback required");if(!t.all)throw new Error(".all callback required");return r=t.one,e.all=t.all,e}}),require.register("matches-selector",function(e,t,n){function r(e,t){if(s)return s.call(e,t);for(var n=i.all(t,e.parentNode),r=0;r<n.length;++r)if(n[r]==e)return!0;return!1}var i=t("query"),o=Element.prototype,s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.msMatchesSelector||o.oMatchesSelector;n.exports=r}),require.register("traverse",function(e,t,n){var r=t("matches-selector");n.exports=function(e,t,n,i){var t=t[e],o=i||1,s=[];if(!t)return s;do{if(o==s.length)break;1==t.nodeType&&(r(t,n)&&s.push(t),n||s.push(t))}while(t=t[e]);return s}}),require.register("trim",function(e,t,n){function r(e){return e.trim?e.trim():e.replace(/^\s*|\s*$/g,"")}e=n.exports=r,e.left=function(e){return e.trimLeft?e.trimLeft():e.replace(/^\s*/,"")},e.right=function(e){return e.trimRight?e.trimRight():e.replace(/\s*$/,"")}}),require.register("dom",function(e,t,n){function r(e,t){if(Array.isArray(e))return new i(e);if(e instanceof i)return e;if(e.nodeName)return new i([e]);if("string"!=typeof e)throw new TypeError("invalid selector");var n=d.left(e);if("<"==n.charAt(0))return new i([l(n)],n);var r=t?t.els?t.els[0]:t:document;return new i(f.all(e,r),e)}function i(e,t){this.els=e||[],this.selector=t}var o=t("matches-selector"),s=t("delegate"),u=t("classes"),a=t("traverse");t("indexof");var l=t("domify"),c=t("event"),h=t("value"),f=t("query"),p=t("type"),d=t("trim"),g=t("css"),v=["id","src","rel","cols","rows","type","name","href","title","style","width","height","action","method","tabindex","placeholder"];e=n.exports=r,e.attrs=v,e.List=i,i.prototype.__iterate__=function(){var e=this;return{length:function(){return e.els.length},get:function(t){return new i([e.els[t]])}}},i.prototype.remove=function(){for(var e=0;e<this.els.length;e++){var t=this.els[e],n=t.parentNode;n&&n.removeChild(t)}},i.prototype.attr=function(e,t){if("object"==typeof e){for(var n in e)this.attr(n,e[n]);return this}return 1==arguments.length?this.els[0]&&this.els[0].getAttribute(e):null==t?this.removeAttr(e):this.forEach(function(n){n.setAttribute(e,t)})},i.prototype.removeAttr=function(e){return this.forEach(function(t){t.removeAttribute(e)})},i.prototype.prop=function(e,t){return 1==arguments.length?this.els[0]&&this.els[0][e]:this.forEach(function(n){n[e]=t})},i.prototype.val=i.prototype.value=function(e){return 0==arguments.length?this.els[0]?h(this.els[0]):void 0:this.forEach(function(t){h(t,e)})},i.prototype.clone=function(){for(var e=[],t=0,n=this.els.length;n>t;++t)e.push(this.els[t].cloneNode(!0));return new i(e)},i.prototype.prepend=function(e){var t=this.els[0];if(!t)return this;e=r(e);for(var n=0;n<e.els.length;++n)t.children.length?t.insertBefore(e.els[n],t.firstChild):t.appendChild(e.els[n]);return e},i.prototype.append=function(e){var t=this.els[0];if(!t)return this;e=r(e);for(var n=0;n<e.els.length;++n)t.appendChild(e.els[n]);return e},i.prototype.appendTo=function(e){return r(e).append(this),this},i.prototype.insertAfter=function(e){return e=r(e).els[0],e&&e.parentNode?(this.forEach(function(t){e.parentNode.insertBefore(t,e.nextSibling)}),this):this},i.prototype.at=function(e){return new i([this.els[e]],this.selector)},i.prototype.first=function(){return new i([this.els[0]],this.selector)},i.prototype.last=function(){return new i([this.els[this.els.length-1]],this.selector)},i.prototype.get=function(e){return this.els[e||0]},i.prototype.length=function(){return this.els.length},i.prototype.text=function(e){if(1==arguments.length)return this.forEach(function(t){t.textContent=e}),this;for(var e="",t=0;t<this.els.length;++t)e+=this.els[t].textContent;return e},i.prototype.html=function(e){return 1==arguments.length?this.forEach(function(t){t.innerHTML=e}):this.els[0]&&this.els[0].innerHTML},i.prototype.on=function(e,t,n,r){if("string"==typeof t){for(var i=0;i<this.els.length;++i)n._delegate=s.bind(this.els[i],t,e,n,r);return this}r=n,n=t;for(var i=0;i<this.els.length;++i)c.bind(this.els[i],e,n,r);return this},i.prototype.off=function(e,t,n,r){if("string"==typeof t){for(var i=0;i<this.els.length;++i)s.unbind(this.els[i],e,n._delegate,r);return this}r=n,n=t;for(var i=0;i<this.els.length;++i)c.unbind(this.els[i],e,n,r);return this},i.prototype.each=function(e){for(var t=0;t<this.els.length;++t)e(new i([this.els[t]],this.selector),t);return this},i.prototype.forEach=function(e){for(var t=0;t<this.els.length;++t)e(this.els[t],t);return this},i.prototype.map=function(e){for(var t=[],n=0;n<this.els.length;++n)t.push(e(new i([this.els[n]],this.selector),n));return t},i.prototype.select=i.prototype.filter=function(e){for(var t,n=new i([],this.selector),r=0;r<this.els.length;++r)t=this.els[r],e(new i([t],this.selector),r)&&n.els.push(t);return n},i.prototype.reject=function(e){for(var t,n=new i([],this.selector),r=0;r<this.els.length;++r)t=this.els[r],e(new i([t],this.selector),r)||n.els.push(t);return n},i.prototype.addClass=function(e){for(var t,n=0;n<this.els.length;++n)t=this.els[n],t._classes=t._classes||u(t),t._classes.add(e);return this},i.prototype.removeClass=function(e){var t;if("regexp"==p(e)){for(var n=0;n<this.els.length;++n){t=this.els[n],t._classes=t._classes||u(t);for(var r=t._classes.array(),i=0;i<r.length;i++)e.test(r[i])&&t._classes.remove(r[i])}return this}for(var n=0;n<this.els.length;++n)t=this.els[n],t._classes=t._classes||u(t),t._classes.remove(e);return this},i.prototype.toggleClass=function(e,t){var n,r="toggle";2==arguments.length&&(r=t?"add":"remove");for(var i=0;i<this.els.length;++i)n=this.els[i],n._classes=n._classes||u(n),n._classes[r](e);return this},i.prototype.hasClass=function(e){for(var t,n=0;n<this.els.length;++n)if(t=this.els[n],t._classes=t._classes||u(t),t._classes.has(e))return!0;return!1},i.prototype.css=function(e,t){if(2==arguments.length){var n={};return n[e]=t,this.setStyle(n)}return"object"==p(e)?this.setStyle(e):this.getStyle(e)},i.prototype.setStyle=function(e){for(var t=0;t<this.els.length;++t)g(this.els[t],e);return this},i.prototype.getStyle=function(e){var t=this.els[0];return t?t.style[e]:void 0},i.prototype.find=function(e){return r(e,this)},i.prototype.empty=function(){for(var e,t=0;t<this.els.length;++t)for(e=this.els[t];e.firstChild;)e.removeChild(e.firstChild);return this},i.prototype.is=function(e){return o(this.get(0),e)},i.prototype.parent=function(e,t){return new i(a("parentNode",this.get(0),e,t||1))},i.prototype.next=function(e,t){return new i(a("nextSibling",this.get(0),e,t||1))},i.prototype.prev=i.prototype.previous=function(e,t){return new i(a("previousSibling",this.get(0),e,t||1))},v.forEach(function(e){i.prototype[e]=function(t){return 0==arguments.length?this.attr(e):this.attr(e,t)}})}),require.register("model",function(){}),require.register("view",function(e,t,n){var r=t("hyperbone-view"),i=t("dom");r.registerHelper("pluralise",function(e,t){return 1==e?t:t+"s"}),r.registerAttributeHandler("dblclicktoedit",function(e){var t=this,n=i(e).find("label"),r=i(e).find("input.edit");n.on("dblclick",function(){t.model.set("editing","editing"),r.els[0].focus()}),r.on("keypress",function(e){13===e.which&&t.model.set("editing","")}),r.on("blur",function(){t.model.set("editing","")})}),n.exports=r.HyperboneView}),require.register("todomvc-hyperbone",function(e,t){var n=t("view"),r=t("hyperbone-model").Model,i=t("dom");window.model=new r({_links:{self:{href:"/"}},remaining:0,completed:0,items:[],_embedded:{filters:[{_links:{self:{href:"/#!/all"}},selected:"selected",description:"All"},{_links:{self:{href:"/#!/active"}},selected:"",description:"Active"},{_links:{self:{href:"/#!/completed"}},selected:"",description:"Completed"}]}}),new n({model:model,el:i("#todoapp")}),model.on("change:new-task",function(){var e=model.get("new-task");e&&(model.get("items").add({completed:!1,task:e}),model.set("new-task",""))}).on("toggle-all",function(e){e.get("items").each(function(e){e.set("completed",e.get("completed")?"":"completed")})}).on("clear-completed",function(){var e=[];model.get("items").each(function(t){t.get("completed")&&e.push(function(){t.destroy()})}),e.forEach(function(e){e()})}).on("filters-changed:filters",function(e){model.get("filters").each(function(e){e.get("selected")&&e.set("selected","")}),e.set("selected","selected")}).on("add:items change:items",function(){model.set("remaining",model.get("items").select(function(e){return!e.get("completed")}).length),model.set("completed",model.get("items").select(function(e){return e.get("completed")}).length)})});